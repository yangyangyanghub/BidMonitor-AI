# æ‹›æŠ•æ ‡ä¿¡æ¯è¯„ä¼°ç­›é€‰ Skill

å¯¹ `bids.db` ä¸­æ¯å¤©å‘ç°çš„æ‹›æŠ•æ ‡ä¿¡æ¯è¿›è¡Œå¤šç»´åº¦è¯„ä¼°ï¼Œç­›é€‰å‡ºæœ€æœ‰å‚è€ƒæ€§çš„é¡¹ç›®ã€‚

## åŠŸèƒ½ç‰¹æ€§

### äº”ç»´åº¦è¯„ä¼°ä½“ç³»

| ç»´åº¦ | æƒé‡ | è¯„åˆ†æ ‡å‡† |
|------|------|----------|
| **ç›¸å…³æ€§** | 30% | åŸºäºæ ‡é¢˜å’Œå†…å®¹çš„å…³é”®è¯å¯†åº¦ |
| **æ—¶æ•ˆæ€§** | 25% | åŸºäºå‘å¸ƒæ—¶é—´çš„è¡°å‡å‡½æ•° |
| **æƒå¨æ€§** | 20% | åŸºäºæ¥æºç½‘ç«™çš„æƒå¨ç­‰çº§ |
| **å®Œæ•´æ€§** | 15% | åŸºäºå­—æ®µå¡«å……æƒ…å†µ |
| **è§„æ¨¡** | 10% | åŸºäºé¡¹ç›®è§„æ¨¡æ¨æµ‹ |

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨

```bash
# è¯„ä¼°æœ€è¿‘ 7 å¤©çš„æ•°æ®
python skills/bid_evaluator.py

# æŸ¥çœ‹ç”Ÿæˆçš„æŠ¥å‘Š
type bid_evaluation_report.txt
```

### è‡ªå®šä¹‰é…ç½®

```python
from skills.bid_evaluator import BidEvaluator

# åˆ›å»ºè¯„ä¼°å™¨ï¼ˆè‡ªå®šä¹‰æƒé‡ï¼‰
config = {
    "weights": {
        "relevance": 0.40,      # æé«˜ç›¸å…³æ€§æƒé‡
        "freshness": 0.20,
        "authority": 0.20,
        "completeness": 0.15,
        "scale": 0.05,
    },
    "min_score": 60.0,         # é™ä½æœ€ä½åˆ†æ•°çº¿
    "top_n": 30,               # å¢åŠ  Top N æ•°é‡
    "days": 14,                # è¯„ä¼°æœ€è¿‘ 14 å¤©
    "relevance_keywords": [
        "æ— äººæœº", "å…‰ä¼", "é£ç”µ", "å·¡æ£€"  # è‡ªå®šä¹‰å…³é”®è¯
    ]
}

evaluator = BidEvaluator(config=config)
results = evaluator.evaluate_daily(days=14)
report = evaluator.generate_summary(results)

# ä¿å­˜æŠ¥å‘Š
with open("custom_report.txt", "w", encoding="utf-8") as f:
    f.write(report)
```

### é›†æˆåˆ°å®šæ—¶ä»»åŠ¡

```python
# æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡
from skills.bid_evaluator import BidEvaluator

def daily_evaluation():
    evaluator = BidEvaluator()
    results = evaluator.evaluate_daily(days=1)  # è¯„ä¼°ä»Šå¤©çš„æ•°æ®

    # å‘é€æŠ¥å‘Šåˆ°é€šçŸ¥æ¸ é“
    if results:
        report = evaluator.generate_summary(results)
        # è¿™é‡Œå¯ä»¥é›†æˆé‚®ä»¶/å¾®ä¿¡é€šçŸ¥
        send_notification(report)
```

## è¾“å‡ºæŠ¥å‘Šç¤ºä¾‹

```
============================================================
ğŸ“Š æ‹›æŠ•æ ‡ä¿¡æ¯è¯„ä¼°æŠ¥å‘Š (Top 20)
============================================================

âœ… å¹³å‡è¯„åˆ†: 68.1
ğŸ“ æ¥æºåˆ†å¸ƒ: {
    'æ²³åŒ—çœå…¬å…±èµ„æºäº¤æ˜“ä¸­å¿ƒ': 8,
    'ä¸­å›½é‡‡è´­æ‹›æ ‡ç½‘': 3,
    ...
}

ğŸ”¥ æ¨èé¡¹ç›®åˆ—è¡¨:
------------------------------------------------------------

ã€1ã€‘æ€»åˆ†: 76.5 | æ²³åŒ—çœå…¬å…±èµ„æºäº¤æ˜“ä¸­å¿ƒ
    æ ‡é¢˜: æ²³åŒ—çœåœ°è´¨çŸ¿äº§å‹˜æŸ¥å¼€å‘å±€ç¬¬ä¹åœ°è´¨å¤§é˜Ÿ...
    å‘å¸ƒ: 2026-02-26 | é‡‡è´­æ–¹: æœªçŸ¥
    é“¾æ¥: https://szj.hebei.gov.cn/...
    è¯„åˆ†: ç›¸å…³=50 æ—¶æ•ˆ=100 æƒå¨=85 å®Œæ•´=70 è§„æ¨¡=90
...
```

## é…ç½®è¯´æ˜

### æƒå¨æ€§æ¥æºç­‰çº§

| æ¥æº | è¯„åˆ† |
|------|------|
| ä¸­å›½æ”¿åºœé‡‡è´­ç½‘ | 100 |
| å›½å®¶ç”µç½‘ | 95 |
| åèƒ½é›†å›¢ | 90 |
| å…¬å…±èµ„æºäº¤æ˜“ä¸­å¿ƒ | 85 |

### æ—¶æ•ˆæ€§è¯„åˆ†

| å‘å¸ƒæ—¶é—´ | è¯„åˆ† |
|----------|------|
| 1 å¤©å†… | 100 |
| 3 å¤©å†… | 80 |
| 7 å¤©å†… | 50 |
| 14 å¤©å†… | 20 |
| è¶…è¿‡ 14 å¤© | 10 |

## æ•°æ®è¦æ±‚

- æ•°æ®åº“æ–‡ä»¶: `data/bids.db` (SQLite)
- å¿…éœ€å­—æ®µ: `id, title, url, publish_date, source, content, purchaser, created_at`

## æ ¸å¿ƒç±»

### BidEvaluator

ä¸»è¦è¯„ä¼°å™¨ç±»ã€‚

**æ–¹æ³•:**

- `evaluate_daily(days: int = None)` - è¯„ä¼°æœ€è¿‘ N å¤©çš„æ•°æ®
- `generate_summary(scores: List[BidScore])` - ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š
- `_evaluate_single(bid: Dict)` - è¯„ä¼°å•æ¡è®°å½•ï¼ˆå†…éƒ¨æ–¹æ³•ï¼‰

### BidScore

è¯„åˆ†ç»“æœæ•°æ®ç±»ã€‚

**å±æ€§:**

- `bid_id`: è®°å½• ID
- `title`, `url`, `source`, `publish_date`, `purchaser`: åŸºæœ¬ä¿¡æ¯
- `relevance_score`, `freshness_score`, `authority_score`, `completeness_score`, `scale_score`: å„ç»´åº¦è¯„åˆ†
- `total_score`: æ€»åˆ†
- `rank`: æ’å

## æ€§èƒ½è€ƒè™‘

- è¯„ä¼° 100 æ¡è®°å½•çº¦éœ€ 1-2 ç§’
- å»ºè®®æ¯å¤©è¿è¡Œ 1 æ¬¡ï¼Œè¯„ä¼°å½“å¤©æ–°å¢æ•°æ®
- å¯ç»“åˆ cron/systemd å®šæ—¶è¿è¡Œ

## æ‰©å±•æ–¹å‘

1. **è‡ªå®šä¹‰è¯„åˆ†è§„åˆ™**: ä¿®æ”¹ `_score_relevance()` ç­‰æ–¹æ³•
2. **æ–°å¢è¯„ä¼°ç»´åº¦**: åœ¨ `_evaluate_single()` ä¸­æ·»åŠ 
3. **æœºå™¨å­¦ä¹ é›†æˆ**: ä½¿ç”¨å†å²æ•°æ®è®­ç»ƒè¯„åˆ†æ¨¡å‹
4. **å®æ—¶ç›‘æ§**: é›†æˆåˆ°ç›‘æ§å¾ªç¯ï¼Œå®æ—¶è¯„åˆ†æ–°æ•°æ®
